(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[137],{12960:(e,t,r)=>{Promise.resolve().then(r.bind(r,88026))},88026:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(95155),a=r(12115),o=r(14807),l=r(86878),d=r(5870),c=r(17819),i=r(60719),n=r(11864),u=r(66261);r(79279);var x=r(14385);let m="https://tcryasuisocelektmrmb.supabase.co",p="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRjcnlhc3Vpc29jZWxla3Rtcm1iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExNTg0NjAsImV4cCI6MjA3NjczNDQ2MH0.ph2fiRKBIrgqwAnDOG_wM6-RehO0M_EJ1QJInItH8aQ";if(!m||!p)throw Error("Missing Supabase environment variables");let h=(0,x.UU)(m,p);async function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1?arguments[1]:void 0;try{let r=h.from("all_time_sales").select("sku, description, vendor, product_category, overall_product_category, sales_total, profit_total, orders, roi, sales_each");t&&(r=r.gte("date",t.start).lte("date",t.end));let{data:s,error:a}=await r;if(a||!s||0===s.length)return console.warn("Supabase error fetching top products:",a),{data:[{sku:"SDPL-8000-DT",description:"Parking Lift Drip Trays for SDPL-8000 (3 Pack)",vendor:"Titan Lifts",product_category:"Automotive Equipment",overall_product_category:"Equipment",total_sales:15e3,total_revenue:85e3,total_profit:25500,total_orders:120,avg_roi:.3,avg_price:125},{sku:"RS80JB02",description:'8" x 2" Mold-On Rubber Cast Wheel - 600 lbs Capacity',vendor:"Durable Superior Casters",product_category:"General Casters",overall_product_category:"Casters",total_sales:12500,total_revenue:67500,total_profit:22500,total_orders:465,avg_roi:.33,avg_price:26.83},{sku:"GR-6",description:"Heavy Duty Warehouse Guard Rail Beam Length 6 ft",vendor:"Handle-It",product_category:"Guard Rail",overall_product_category:"Warehouse Protection",total_sales:8900,total_revenue:52300,total_profit:18900,total_orders:63,avg_roi:.36,avg_price:141.7},{sku:"509937010009",description:"PTE33Q Battery for Powered Pallet Jack",vendor:"Noblelift",product_category:"Battery, Charger, Accessories",overall_product_category:"Accessories",total_sales:7500,total_revenue:45e3,total_profit:15750,total_orders:15,avg_roi:.35,avg_price:500},{sku:"BCSV404036",description:'4" Carbon Steel Dome Top Bollard with Baseplate',vendor:"S4 Bollards",product_category:"Fixed Bollards",overall_product_category:"Bollards",total_sales:6400,total_revenue:38400,total_profit:13440,total_orders:32,avg_roi:.35,avg_price:199.25}],source:"sample",error:null==a?void 0:a.message,refreshedAt:new Date().toISOString()};let o=new Map;return s.forEach(e=>{let t=e.sku;o.has(t)||o.set(t,{sku:e.sku,description:e.description,vendor:e.vendor,product_category:e.product_category||"Uncategorized",overall_product_category:e.overall_product_category||"Other",total_sales:0,total_revenue:0,total_profit:0,total_orders:0,roi_sum:0,roi_count:0,price_sum:0,price_count:0});let r=o.get(t);r.total_sales+=e.sales_total||0,r.total_revenue+=e.sales_total||0,r.total_profit+=e.profit_total||0,r.total_orders+=e.orders||0,e.roi&&(r.roi_sum+=e.roi,r.roi_count+=1),e.sales_each&&(r.price_sum+=e.sales_each,r.price_count+=1)}),{data:Array.from(o.values()).map(e=>({sku:e.sku,description:e.description,vendor:e.vendor,product_category:e.product_category,overall_product_category:e.overall_product_category,total_sales:e.total_sales,total_revenue:e.total_revenue,total_profit:e.total_profit,total_orders:e.total_orders,avg_roi:e.roi_count>0?e.roi_sum/e.roi_count:0,avg_price:e.price_count>0?e.price_sum/e.price_count:0})).sort((e,t)=>t.total_revenue-e.total_revenue).slice(0,e),source:"supabase",refreshedAt:new Date().toISOString()}}catch(e){return console.error("Error fetching top products:",e),{data:[],source:"sample",error:e instanceof Error?e.message:"Unknown error",refreshedAt:new Date().toISOString()}}}function v(){let[e,t]=(0,a.useState)([]),[r,x]=(0,a.useState)(!0),[m,p]=(0,a.useState)(null),[h,v]=(0,a.useState)("all"),[_,f]=(0,a.useState)("revenue");(0,a.useEffect)(()=>{j()},[]);let j=async()=>{try{x(!0);let e=await g(50);e.error?p(e.error):t(e.data)}catch(e){p(e instanceof Error?e.message:"Failed to load products")}finally{x(!1)}},N=Array.from(new Set(e.map(e=>e.overall_product_category))).filter(Boolean),y=e.filter(e=>"all"===h||e.overall_product_category===h).sort((e,t)=>{switch(_){case"revenue":return t.total_revenue-e.total_revenue;case"orders":return t.total_orders-e.total_orders;case"roi":return t.avg_roi-e.avg_roi;case"profit":return t.total_profit-e.total_profit;default:return 0}}),b=y.reduce((e,t)=>e+t.total_revenue,0),w=y.reduce((e,t)=>e+t.total_profit,0),S=y.reduce((e,t)=>e+t.total_orders,0),k=y.length>0?y.reduce((e,t)=>e+t.avg_roi,0)/y.length:0,A=y.slice(0,3);return r?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading top products..."})]})}):m?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("p",{className:"text-red-500",children:["Error: ",m]}),(0,s.jsx)("button",{onClick:j,className:"mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:opacity-90",children:"Retry"})]})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Top Products"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Performance analysis based on all-time sales data"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("select",{value:h,onChange:e=>v(e.target.value),className:"px-3 py-2 border rounded-lg bg-card",children:[(0,s.jsx)("option",{value:"all",children:"All Categories"}),N.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("select",{value:_,onChange:e=>f(e.target.value),className:"px-3 py-2 border rounded-lg bg-card",children:[(0,s.jsx)("option",{value:"revenue",children:"Sort by Revenue"}),(0,s.jsx)("option",{value:"orders",children:"Sort by Orders"}),(0,s.jsx)("option",{value:"roi",children:"Sort by ROI"}),(0,s.jsx)("option",{value:"profit",children:"Sort by Profit"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsx)("div",{className:"rounded-xl border bg-card p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Revenue"}),(0,s.jsxs)("p",{className:"text-2xl font-bold mt-1",children:["$",b.toLocaleString()]})]}),(0,s.jsx)(o.A,{className:"h-8 w-8 text-green-500"})]})}),(0,s.jsx)("div",{className:"rounded-xl border bg-card p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Profit"}),(0,s.jsxs)("p",{className:"text-2xl font-bold mt-1",children:["$",w.toLocaleString()]})]}),(0,s.jsx)(l.A,{className:"h-8 w-8 text-blue-500"})]})}),(0,s.jsx)("div",{className:"rounded-xl border bg-card p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Orders"}),(0,s.jsx)("p",{className:"text-2xl font-bold mt-1",children:S.toLocaleString()})]}),(0,s.jsx)(d.A,{className:"h-8 w-8 text-purple-500"})]})}),(0,s.jsx)("div",{className:"rounded-xl border bg-card p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Average ROI"}),(0,s.jsxs)("p",{className:"text-2xl font-bold mt-1",children:[(100*k).toFixed(1),"%"]})]}),(0,s.jsx)(c.A,{className:"h-8 w-8 text-yellow-500"})]})})]}),A.length>0&&(0,s.jsxs)("div",{className:"rounded-xl border bg-card p-6",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,s.jsx)(c.A,{className:"h-5 w-5 text-yellow-500"}),"Top Performers"]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:A.map((e,t)=>(0,s.jsxs)("div",{className:"rounded-lg border bg-gradient-to-br from-card to-muted/20 p-4",children:[(0,s.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"\n                      w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm\n                      ".concat(0===t?"bg-yellow-500 text-white":"","\n                      ").concat(1===t?"bg-gray-400 text-white":"","\n                      ").concat(2===t?"bg-orange-500 text-white":"","\n                    "),children:t+1}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:e.sku})]})}),(0,s.jsx)("h3",{className:"font-medium text-sm line-clamp-2 mb-2",children:e.description}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Revenue"}),(0,s.jsxs)("span",{className:"font-semibold",children:["$",e.total_revenue.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"ROI"}),(0,s.jsxs)("span",{className:"font-semibold text-green-500",children:[(100*e.avg_roi).toFixed(0),"%"]})]})]})]},e.sku))})]}),(0,s.jsxs)("div",{className:"rounded-xl border bg-card overflow-hidden",children:[(0,s.jsx)("div",{className:"p-6 border-b",children:(0,s.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,s.jsx)(i.A,{className:"h-5 w-5"}),"All Products (",y.length,")"]})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b bg-muted/50",children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Rank"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Product"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Vendor"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Category"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Revenue"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Profit"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Orders"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Avg Price"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"ROI"})]})}),(0,s.jsx)("tbody",{className:"divide-y",children:y.slice(0,20).map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-muted/30 transition-colors",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,s.jsxs)("span",{className:"font-semibold",children:["#",t+1]})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:e.description}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.sku})]})}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm",children:e.vendor}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-muted",children:e.product_category||"N/A"})}),(0,s.jsxs)("td",{className:"px-6 py-4 text-right text-sm font-medium",children:["$",e.total_revenue.toLocaleString()]}),(0,s.jsx)("td",{className:"px-6 py-4 text-right text-sm",children:(0,s.jsxs)("span",{className:"text-green-600",children:["$",e.total_profit.toLocaleString()]})}),(0,s.jsx)("td",{className:"px-6 py-4 text-right text-sm",children:e.total_orders.toLocaleString()}),(0,s.jsxs)("td",{className:"px-6 py-4 text-right text-sm",children:["$",e.avg_price.toFixed(2)]}),(0,s.jsx)("td",{className:"px-6 py-4 text-right",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[e.avg_roi>.35?(0,s.jsx)(n.A,{className:"h-3 w-3 text-green-500"}):e.avg_roi<.2?(0,s.jsx)(u.A,{className:"h-3 w-3 text-red-500"}):null,(0,s.jsxs)("span",{className:"text-sm font-semibold ".concat(e.avg_roi>.35?"text-green-500":e.avg_roi<.2?"text-red-500":""),children:[(100*e.avg_roi).toFixed(0),"%"]})]})})]},e.sku))})]})})]})]})}},79279:(e,t,r)=>{"use strict";r.d(t,{HI:()=>s,Oh:()=>o,rz:()=>a});let s=[{id:"alert-1",level:"warning",message:"High inventory turnover on premium SKUs"},{id:"alert-2",level:"info",message:"Monthly performance targets on track"}],a=[{id:"q1",vendor:"Vendor A",rep:"Alice Johnson",amount:15e3,value:15e3,date:"2024-11-01",createdAt:"2024-11-01",status:"open"},{id:"q2",vendor:"Vendor B",rep:"Bob Smith",amount:22500,value:22500,date:"2024-11-02",createdAt:"2024-11-02",status:"open"},{id:"q3",vendor:"Vendor A",rep:"Alice Johnson",amount:18900,value:18900,date:"2024-11-03",createdAt:"2024-11-03",status:"won"},{id:"q4",vendor:"Vendor C",rep:"Carol Davis",amount:31200,value:31200,date:"2024-11-04",createdAt:"2024-11-04",status:"open"},{id:"q5",vendor:"Vendor B",rep:"Bob Smith",amount:28500,value:28500,date:"2024-11-05",createdAt:"2024-11-05",status:"won"}],o=[{sku:"SKU-001",name:"Premium Widget A",category:"Electronics",vendor:"Vendor A",status:"active",price:299.99,cost:150},{sku:"SKU-002",name:"Standard Widget B",category:"Electronics",vendor:"Vendor B",status:"active",price:149.99,cost:75},{sku:"SKU-003",name:"Premium Widget C",category:"Hardware",vendor:"Vendor C",status:"active",price:449.99,cost:225},{sku:"SKU-004",name:"Standard Widget D",category:"Accessories",vendor:"Vendor A",status:"inactive",price:49.99,cost:25},{sku:"SKU-005",name:"Premium Widget E",category:"Hardware",vendor:"Vendor B",status:"active",price:599.99,cost:300}]}},e=>{var t=t=>e(e.s=t);e.O(0,[714,98,441,517,358],()=>t(12960)),_N_E=e.O()}]);